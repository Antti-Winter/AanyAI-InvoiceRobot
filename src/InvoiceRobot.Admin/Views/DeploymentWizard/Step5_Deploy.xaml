<UserControl x:Class="InvoiceRobot.Admin.Views.DeploymentWizard.Step5_Deploy"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="40">
            <TextBlock Text="Deployment"
                       FontSize="24"
                       FontWeight="Bold"
                       Margin="0,0,0,20" />

            <TextBlock Text="Kaikki valmista! Voit nyt kÃ¤ynnistÃ¤Ã¤ Azure-deploymentin."
                       TextWrapping="Wrap"
                       FontSize="14"
                       Margin="0,0,0,20"
                       Visibility="{Binding IsDeploying, Converter={StaticResource InverseBoolToVisConverter}}" />

            <!-- Deployment Progress -->
            <ProgressBar Value="{Binding DeploymentProgress}"
                         Minimum="0"
                         Maximum="100"
                         Height="8"
                         Margin="0,0,0,20"
                         Visibility="{Binding IsDeploying, Converter={StaticResource BoolToVisConverter}}"
                         Style="{StaticResource MaterialDesignLinearProgressBar}" />

            <TextBlock Text="{Binding DeploymentProgress, StringFormat='Edistyminen: {0:F0}%'}"
                       FontSize="14"
                       Margin="0,0,0,10"
                       Visibility="{Binding IsDeploying, Converter={StaticResource BoolToVisConverter}}" />

            <!-- Deployment Steps Log -->
            <Border BorderBrush="{DynamicResource MaterialDesignDivider}"
                    BorderThickness="1"
                    Padding="15"
                    Margin="0,0,0,20"
                    Visibility="{Binding IsDeploying, Converter={StaticResource BoolToVisConverter}}">
                <ScrollViewer MaxHeight="300"
                              VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding DeploymentSteps}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}"
                                           FontFamily="Consolas"
                                           FontSize="12"
                                           Margin="0,2" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <!-- Success/Error Message -->
            <TextBlock Text="âœ“ Deployment onnistui!"
                       FontSize="16"
                       FontWeight="Bold"
                       Foreground="Green"
                       Margin="0,0,0,10"
                       Visibility="{Binding DeploymentSucceeded, Converter={StaticResource BoolToVisConverter}}" />

            <!-- Virheilmoitus - kopioitavissa -->
            <Border BorderBrush="Red"
                    BorderThickness="1"
                    Padding="10"
                    Margin="0,0,0,10"
                    Visibility="{Binding DeploymentError, Converter={StaticResource NullToVisConverter}}">
                <StackPanel>
                    <TextBlock Text="âŒ Virhe:"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="Red"
                               Margin="0,0,0,5" />

                    <TextBox Text="{Binding DeploymentError, Mode=OneWay}"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             FontSize="12"
                             FontFamily="Consolas"
                             Foreground="Red"
                             Background="Transparent"
                             BorderThickness="0"
                             IsReadOnlyCaretVisible="False"
                             VerticalScrollBarVisibility="Auto"
                             MaxHeight="200" />
                </StackPanel>
            </Border>

            <!-- Navigation Buttons -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,30,0,0">
                <Button Content="â† Edellinen"
                        Command="{Binding PreviousStepCommand}"
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        Margin="0,0,10,0"
                        IsEnabled="{Binding IsDeploying, Converter={StaticResource InverseBoolConverter}}" />

                <Button Content="ðŸš€ KÃ¤ynnistÃ¤ Deployment"
                        Command="{Binding DeployCommand}"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        IsEnabled="{Binding IsDeploying, Converter={StaticResource InverseBoolConverter}}"
                        Visibility="{Binding DeploymentSucceeded, Converter={StaticResource InverseBoolToVisConverter}}" />

                <Button Content="Valmis"
                        Command="{Binding FinishCommand}"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Visibility="{Binding DeploymentSucceeded, Converter={StaticResource BoolToVisConverter}}" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
